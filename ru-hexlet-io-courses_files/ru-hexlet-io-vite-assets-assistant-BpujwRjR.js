import{i as Tt,c as jt}from"./configure-CaJBr98Y.js";import{g as ye}from"./gon-BhALMe7c.js";import{r as l,j as d,R as G}from"./index--pM990Kv.js";import{R as Nt}from"./client-C0btf4PR.js";import{c as E,u as k}from"./ThemeProvider-JnMV-h-5.js";import{M as Rt}from"./MarkdownBlock-BZE-9Kf4.js";import{u as ke}from"./useTranslation-LQ3tCCGp.js";import{P as z}from"./index-DbuK6By_.js";import{u as Mt}from"./useIsomorphicEffect-CtuM3TRp.js";import{C as $t}from"./Col-Cj5PvqhV.js";import{B as _t}from"./Button-hr1s0HWF.js";import{M as Ot,t as At,E as Ft,F as Dt}from"./mantine-CyaMGRTv.js";import{a as De}from"./index-Clqyrgz_.js";import"./index-C3xN0De2.js";import{ah as It}from"./routes-D3_By1uV.js";import{d as Lt}from"./debounce-CEMW1B19.js";import{a as Wt}from"./querySelectorAll-Dbc4ZxxF.js";import{T as Bt,a as Ht,b as Gt,d as Ye,e as zt,E as Ut,A as Xt,M as Vt,B as Pt,F as Jt,h as Yt,g as Kt}from"./AbstractModalHeader-2QafzULw.js";import{d as Qt}from"./divWithClassName-D6Yj0Hwn.js";import"./dayjs.min-Dd2KeFUm.js";import"./_commonjsHelpers-nvD0eND0.js";import"./shiki-BWZqOO3A.js";import"./preload-helper-DuY1Ypro.js";import"./index-DpA34UL4.js";import"./index-DLAKPZcH.js";import"./Typography-Be5qTypV.js";import"./polymorphic-factory-CSx7BpFe.js";import"./clsx-Df3gYfTH.js";import"./index-BgDM6TZI.js";import"./index-DZAawO-i.js";import"./Table-FpqYFPEy.js";import"./create-safe-context-D_bVGtXT.js";import"./OptionalPortal-CCkKRzjo.js";import"./use-id-DRoNDU7t.js";import"./use-merged-ref-CSoFYJgk.js";import"./DirectionProvider-B_lkVZDj.js";import"./Image-Chchsb1o.js";import"./exports-DirsvzEY.js";import"./Button-CuIF1nDE.js";import"./px-DIZ9nEfl.js";import"./get-contrast-color-CBUczOeh.js";import"./error-AgJmlNdl.js";import"./Anchor-BiTRFPTp.js";import"./Loader-C5RB82pk.js";import"./use-reduced-motion-BZwrG1Up.js";import"./UnstyledButton-DCtPcZfS.js";import"./get-style-object-kz8GxBSo.js";import"./use-uncontrolled-xPHqkjCC.js";import"./useEventCallback-CV7J4YIt.js";import"./objectWithoutPropertiesLoose-CqYLjXML.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"v9904"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="2b632c49-dc5d-4309-ae95-dc22aac526a3",t._sentryDebugIdIdentifier="sentry-dbid-2b632c49-dc5d-4309-ae95-dc22aac526a3")})()}catch{}(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t._sentryModuleMetadata=t._sentryModuleMetadata||{},t._sentryModuleMetadata[new t.Error().stack]=function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}({},t._sentryModuleMetadata[new t.Error().stack],{"_sentryBundlerPluginAppKey:hexlet.io":!0})}catch{}})();function Zt(t,e){return l.Children.toArray(t).some(n=>l.isValidElement(n)&&n.type===e)}const qt={type:z.string,tooltip:z.bool,as:z.elementType},ae=l.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...i},o)=>d.jsx(t,{...i,ref:o,className:E(e,`${n}-${r?"tooltip":"feedback"}`)}));ae.displayName="Feedback";ae.propTypes=qt;const $=l.createContext({}),Ce=l.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:i=!1,isInvalid:o=!1,as:s="input",...a},c)=>{const{controlId:u}=l.useContext($);return e=k(e,"form-check-input"),d.jsx(s,{...a,ref:c,type:r,id:t||u,className:E(n,e,i&&"is-valid",o&&"is-invalid")})});Ce.displayName="FormCheckInput";const re=l.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},i)=>{const{controlId:o}=l.useContext($);return t=k(t,"form-check-label"),d.jsx("label",{...r,ref:i,htmlFor:n||o,className:E(e,t)})});re.displayName="FormCheckLabel";const Ke=l.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:o=!1,isValid:s=!1,isInvalid:a=!1,feedbackTooltip:c=!1,feedback:u,feedbackType:f,className:m,style:h,title:C="",type:p="checkbox",label:g,children:v,as:y="input",...S},w)=>{e=k(e,"form-check"),n=k(n,"form-switch");const{controlId:j}=l.useContext($),F=l.useMemo(()=>({controlId:t||j}),[j,t]),T=!v&&g!=null&&g!==!1||Zt(v,re),b=d.jsx(Ce,{...S,type:p==="switch"?"checkbox":p,ref:w,isValid:s,isInvalid:a,disabled:o,as:y});return d.jsx($.Provider,{value:F,children:d.jsx("div",{style:h,className:E(m,T&&e,r&&`${e}-inline`,i&&`${e}-reverse`,p==="switch"&&n),children:v||d.jsxs(d.Fragment,{children:[b,T&&d.jsx(re,{title:C,children:g}),u&&d.jsx(ae,{type:f,tooltip:c,children:u})]})})})});Ke.displayName="FormCheck";const oe=Object.assign(Ke,{Input:Ce,Label:re}),Qe=l.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:i,className:o,isValid:s=!1,isInvalid:a=!1,plaintext:c,readOnly:u,as:f="input",...m},h)=>{const{controlId:C}=l.useContext($);return t=k(t,"form-control"),d.jsx(f,{...m,type:e,size:r,ref:h,readOnly:u,id:i||C,className:E(o,c?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,s&&"is-valid",a&&"is-invalid")})});Qe.displayName="FormControl";const en=Object.assign(Qe,{Feedback:ae}),Ze=l.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=k(e,"form-floating"),d.jsx(n,{ref:i,className:E(t,e),...r})));Ze.displayName="FormFloating";const Te=l.forwardRef(({controlId:t,as:e="div",...n},r)=>{const i=l.useMemo(()=>({controlId:t}),[t]);return d.jsx($.Provider,{value:i,children:d.jsx(e,{...n,ref:r})})});Te.displayName="FormGroup";const qe=l.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:o,...s},a)=>{const{controlId:c}=l.useContext($);e=k(e,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const f=E(i,e,r&&"visually-hidden",n&&u);return o=o||c,n?d.jsx($t,{ref:a,as:"label",className:f,htmlFor:o,...s}):d.jsx(t,{ref:a,className:f,htmlFor:o,...s})});qe.displayName="FormLabel";const et=l.forwardRef(({bsPrefix:t,className:e,id:n,...r},i)=>{const{controlId:o}=l.useContext($);return t=k(t,"form-range"),d.jsx("input",{...r,type:"range",ref:i,className:E(e,t),id:n||o})});et.displayName="FormRange";const tt=l.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:i=!1,isInvalid:o=!1,id:s,...a},c)=>{const{controlId:u}=l.useContext($);return t=k(t,"form-select"),d.jsx("select",{...a,size:n,ref:c,className:E(r,t,e&&`${t}-${e}`,i&&"is-valid",o&&"is-invalid"),id:s||u})});tt.displayName="FormSelect";const nt=l.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...i},o)=>(t=k(t,"form-text"),d.jsx(n,{...i,ref:o,className:E(e,t,r&&"text-muted")})));nt.displayName="FormText";const it=l.forwardRef((t,e)=>d.jsx(oe,{...t,ref:e,type:"switch"}));it.displayName="Switch";const tn=Object.assign(it,{Input:oe.Input,Label:oe.Label}),rt=l.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:i,...o},s)=>(t=k(t,"form-floating"),d.jsxs(Te,{ref:s,className:E(e,t),controlId:r,...o,children:[n,d.jsx("label",{htmlFor:r,children:i})]})));rt.displayName="FloatingLabel";const nn={_ref:z.any,validated:z.bool,as:z.elementType},je=l.forwardRef(({className:t,validated:e,as:n="form",...r},i)=>d.jsx(n,{...r,ref:i,className:E(t,e&&"was-validated")}));je.displayName="Form";je.propTypes=nn;const Ie=Object.assign(je,{Group:Te,Control:en,Floating:Ze,Check:oe,Switch:tn,Label:qe,Text:nt,Range:et,Select:tt,FloatingLabel:rt}),xe=new WeakMap,Le=(t,e)=>{if(!t||!e)return;const n=xe.get(e)||new Map;xe.set(e,n);let r=n.get(t);return r||(r=e.matchMedia(t),r.refCount=0,n.set(r.media,r)),r};function rn(t,e=typeof window>"u"?void 0:window){const n=Le(t,e),[r,i]=l.useState(()=>n?n.matches:!1);return Mt(()=>{let o=Le(t,e);if(!o)return i(!1);let s=xe.get(e);const a=()=>{i(o.matches)};return o.refCount++,o.addListener(a),a(),()=>{o.removeListener(a),o.refCount--,o.refCount<=0&&s?.delete(o.media),o=void 0}},[t]),r}function on(t){const e=Object.keys(t);function n(a,c){return a===c?c:a?`${a} and ${c}`:c}function r(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function i(a){const c=r(a);let u=t[c];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function o(a){let c=t[a];return typeof c=="number"&&(c=`${c}px`),`(min-width: ${c})`}function s(a,c,u){let f;typeof a=="object"?(f=a,u=c,c=!0):(c=c||!0,f={[a]:c});let m=l.useMemo(()=>Object.entries(f).reduce((h,[C,p])=>((p==="up"||p===!0)&&(h=n(h,o(C))),(p==="down"||p===!0)&&(h=n(h,i(C))),h),""),[JSON.stringify(f)]);return rn(m,u)}return s}const sn=on({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),ot=l.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=k(e,"offcanvas-body"),d.jsx(n,{ref:i,className:E(t,e),...r})));ot.displayName="OffcanvasBody";const an={[Ye]:"show",[Ut]:"show"},st=l.forwardRef(({bsPrefix:t,className:e,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:o=!1,appear:s=!1,...a},c)=>(t=k(t,"offcanvas"),d.jsx(Bt,{ref:c,addEndListener:Gt,in:r,mountOnEnter:i,unmountOnExit:o,appear:s,...a,childRef:Ht(n),children:(u,f)=>l.cloneElement(n,{...f,className:E(e,n.props.className,(u===Ye||u===zt)&&`${t}-toggling`,an[u])})})));st.displayName="OffcanvasToggling";const at=l.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},o)=>(t=k(t,"offcanvas-header"),d.jsx(Xt,{ref:o,...i,className:E(e,t),closeLabel:n,closeButton:r})));at.displayName="OffcanvasHeader";const cn=Qt("h5"),ct=l.forwardRef(({className:t,bsPrefix:e,as:n=cn,...r},i)=>(e=k(e,"offcanvas-title"),d.jsx(n,{ref:i,className:E(t,e),...r})));ct.displayName="OffcanvasTitle";function ln(t){return d.jsx(st,{...t})}function un(t){return d.jsx(Jt,{...t})}const lt=l.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":r,placement:i="start",responsive:o,show:s=!1,backdrop:a=!0,keyboard:c=!0,scroll:u=!1,onEscapeKeyDown:f,onShow:m,onHide:h,container:C,autoFocus:p=!0,enforceFocus:g=!0,restoreFocus:v=!0,restoreFocusOptions:y,onEntered:S,onExit:w,onExiting:j,onEnter:F,onEntering:T,onExited:b,backdropClassName:_,manager:O,renderStaticNode:vt=!1,...bt},yt)=>{const ue=l.useRef();t=k(t,"offcanvas");const[Oe,xt]=l.useState(!1),de=Wt(h),Ae=sn(o||"xs","up");l.useEffect(()=>{xt(o?s&&!Ae:s)},[s,o,Ae]);const Et=l.useMemo(()=>({onHide:de}),[de]);function wt(){return O||(u?(ue.current||(ue.current=new Yt({handleContainerOverflow:!1})),ue.current):Kt())}const St=(N,...fe)=>{N&&(N.style.visibility="visible"),F?.(N,...fe)},kt=(N,...fe)=>{N&&(N.style.visibility=""),b?.(...fe)},Ct=l.useCallback(N=>d.jsx("div",{...N,className:E(`${t}-backdrop`,_)}),[_,t]),Fe=N=>d.jsx("div",{...N,...bt,className:E(e,o?`${t}-${o}`:t,`${t}-${i}`),"aria-labelledby":r,children:n});return d.jsxs(d.Fragment,{children:[!Oe&&(o||vt)&&Fe({}),d.jsx(Vt.Provider,{value:Et,children:d.jsx(Pt,{show:Oe,ref:yt,backdrop:a,container:C,keyboard:c,autoFocus:p,enforceFocus:g&&!u,restoreFocus:v,restoreFocusOptions:y,onEscapeKeyDown:f,onShow:m,onHide:de,onEnter:St,onEntering:T,onEntered:S,onExit:w,onExiting:j,onExited:kt,manager:wt(),transition:ln,backdropTransition:un,renderBackdrop:Ct,renderDialog:Fe})})]})});lt.displayName="Offcanvas";const K=Object.assign(lt,{Body:ot,Header:at,Title:ct}),ut=l.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:r,as:i="div",className:o,...s},a)=>{t=k(t,"spinner");const c=`${t}-${n}`;return d.jsx(i,{ref:a,...s,className:E(o,c,r&&`${c}-${r}`,e&&`text-${e}`)})});ut.displayName="Spinner";function Q({memberRole:t,body:e}){const n=E("hexlet-content mt-3",{"text-end bg-body-secondary ms-5 p-3 rounded":t==="user"});return d.jsx("div",{className:n,children:d.jsx(Rt,{children:e||""})})}function dn({assistantThread:t,previousMessages:e,focusesCount:n,streamData:r}){const{t:i}=ke(),o=i("assistant.disabled");if(!t)return d.jsx("div",{className:"mb-4",children:d.jsx(Q,{memberRole:"assistant",body:o})});const{input:s,status:a,messages:c,submitMessage:u,handleInputChange:f}=r,m=l.useRef(null);return l.useEffect(()=>{m.current?.focus()},[n]),d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-3",children:[d.jsx(Q,{memberRole:"assistant",body:i("assistant.greeting")}),e.map(h=>d.jsx(Q,{memberRole:h.role,body:h.body},h.id)),c.map(h=>d.jsx(Q,{memberRole:h.role,body:h.body},h.id))]}),d.jsxs(Ie,{onSubmit:u,children:[d.jsx(Ie.Control,{ref:m,disabled:a==="in_progress",as:"textarea",rows:5,value:s,onChange:f}),d.jsxs("div",{className:"d-flex justify-content-end pt-3",children:[Tt.language==="ru"&&d.jsx("a",{className:"btn btn-outline-primary me-2",target:"_blank",rel:"noreferrer",href:i("common.telegram_help_bot_url"),children:i("assistant.human")}),d.jsxs(_t,{disabled:a!=="awaiting_message",type:"submit",children:[a==="in_progress"&&d.jsx(ut,{className:"me-2",as:"span",animation:"grow",size:"sm","aria-hidden":"true"}),i("assistant.send")]})]})]})]})}var ie={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0},x={log(...t){this.enabled&&(t.push(Date.now()),ie.logger.log("[ActionCable]",...t))}};const J=()=>new Date().getTime(),Z=t=>(J()-t)/1e3;class Ne{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=J(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),x.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=J(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),x.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordMessage(){this.pingedAt=J()}recordConnect(){this.reconnectAttempts=0,delete this.disconnectedAt,x.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=J(),x.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){const{staleThreshold:e,reconnectionBackoffRate:n}=this.constructor,r=Math.pow(1+n,Math.min(this.reconnectAttempts,10)),o=(this.reconnectAttempts===0?1:n)*Math.random();return e*1e3*r*(1+o)}reconnectIfStale(){this.connectionIsStale()&&(x.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Z(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?x.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Z(this.disconnectedAt)} s`):(x.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Z(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Z(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(x.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}}Ne.staleThreshold=6;Ne.reconnectionBackoffRate=.15;var dt={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]};const{message_types:U,protocols:Ee}=dt,fn=Ee.slice(0,Ee.length-1),We=[].indexOf;class Re{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new Ne(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return x.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{const e=[...Ee,...this.consumer.subprotocols||[]];return x.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new ie.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(x.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){x.log("Failed to reopen WebSocket",e)}finally{x.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return We.call(fn,this.getProtocol())>=0}isState(...e){return We.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in ie.WebSocket)if(ie.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){const n=this.events[e].bind(this);this.webSocket[`on${e}`]=n}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}}Re.reopenDelay=500;Re.prototype.events={message(t){if(!this.isProtocolSupported())return;const{identifier:e,message:n,reason:r,reconnect:i,type:o}=JSON.parse(t.data);switch(this.monitor.recordMessage(),o){case U.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case U.disconnect:return x.log(`Disconnecting. Reason: ${r}`),this.close({allowReconnect:i});case U.ping:return null;case U.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case U.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",n)}},open(){if(x.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return x.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(t){if(x.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){x.log("WebSocket onerror event")}};const pn=function(t,e){if(e!=null)for(let n in e){const r=e[n];t[n]=r}return t};class hn{constructor(e,n={},r){this.consumer=e,this.identifier=JSON.stringify(n),pn(this,r)}perform(e,n={}){return n.action=e,this.send(n)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}class mn{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(x.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):x.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){x.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(n=>n!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{x.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}}class gn{constructor(e){this.consumer=e,this.guarantor=new mn(this),this.subscriptions=[]}create(e,n){const r=e,i=typeof r=="object"?r:{channel:r},o=new hn(this.consumer,i,n);return this.add(o)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(n=>(this.forget(n),this.notify(n,"rejected"),n))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(n=>n!==e),e}findAll(e){return this.subscriptions.filter(n=>n.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...n){return this.subscriptions.map(r=>this.notify(r,e,...n))}notify(e,n,...r){let i;return typeof e=="string"?i=this.findAll(e):i=[e],i.map(o=>typeof o[n]=="function"?o[n](...r):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){x.log(`Subscription confirmed ${e}`),this.findAll(e).map(n=>this.guarantor.forget(n))}sendCommand(e,n){const{identifier:r}=e;return this.consumer.send({command:n,identifier:r})}}class vn{constructor(e){this._url=e,this.subscriptions=new gn(this),this.connection=new Re(this),this.subprotocols=[]}get url(){return bn(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}}function bn(t){if(typeof t=="function"&&(t=t()),t&&!/^wss?:/i.test(t)){const e=document.createElement("a");return e.href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return t}function yn(t=xn("url")||dt.default_mount_path){return new vn(t)}function xn(t){const e=document.head.querySelector(`meta[name='action-cable-${t}']`);if(e)return e.getAttribute("content")}function ft(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=ft(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ce(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=ft(t))&&(r&&(r+=" "),r+=e);return r}let En={data:""},wn=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||En,Sn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kn=/\/\*[^]*?\*\/|  +/g,Be=/\n+/g,I=(t,e)=>{let n="",r="",i="";for(let o in t){let s=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+s+";":r+=o[1]=="f"?I(s,o):o+"{"+I(s,o[1]=="k"?"":e)+"}":typeof s=="object"?r+=I(s,e?e.replace(/([^,])+/g,a=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,a):a?a+" "+c:c)):o):s!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=I.p?I.p(o,s):o+":"+s+";")}return n+(e&&i?e+"{"+i+"}":i)+r},R={},pt=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+pt(t[n]);return e}return t},Cn=(t,e,n,r,i)=>{let o=pt(t),s=R[o]||(R[o]=(c=>{let u=0,f=11;for(;u<c.length;)f=101*f+c.charCodeAt(u++)>>>0;return"go"+f})(o));if(!R[s]){let c=o!==t?t:(u=>{let f,m,h=[{}];for(;f=Sn.exec(u.replace(kn,""));)f[4]?h.shift():f[3]?(m=f[3].replace(Be," ").trim(),h.unshift(h[0][m]=h[0][m]||{})):h[0][f[1]]=f[2].replace(Be," ").trim();return h[0]})(t);R[s]=I(i?{["@keyframes "+s]:c}:c,n?"":"."+s)}let a=n&&R.g?R.g:null;return n&&(R.g=R[s]),((c,u,f,m)=>{m?u.data=u.data.replace(m,c):u.data.indexOf(c)===-1&&(u.data=f?c+u.data:u.data+c)})(R[s],e,r,a),s},Tn=(t,e,n)=>t.reduce((r,i,o)=>{let s=e[o];if(s&&s.call){let a=s(n),c=a&&a.props&&a.props.className||/^go/.test(a)&&a;s=c?"."+c:a&&typeof a=="object"?a.props?"":I(a,""):a===!1?"":a}return r+i+(s??"")},"");function Me(t){let e=this||{},n=t.call?t(e.p):t;return Cn(n.unshift?n.raw?Tn(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,wn(e.target),e.g,e.o,e.k)}Me.bind({g:1});Me.bind({k:1});function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nn(t,e,n){return e&&jn(t.prototype,e),t}function A(){return A=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A.apply(this,arguments)}function Rn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function $e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var He=function(){return""},Mn=G.createContext({enqueueSnackbar:He,closeSnackbar:He}),D={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},q="unmounted",L="exited",W="entering",X="entered",Ge="exiting",_e=function(t){Rn(e,t);function e(r){var i;i=t.call(this,r)||this;var o=r.appear,s;return i.appearStatus=null,r.in?o?(s=L,i.appearStatus=W):s=X:r.unmountOnExit||r.mountOnEnter?s=q:s=L,i.state={status:s},i.nextCallback=null,i}e.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===q?{status:L}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==W&&s!==X&&(o=W):(s===W||s===X)&&(o=Ge)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o=i,s=i;return i!=null&&typeof i!="number"&&typeof i!="string"&&(s=i.exit,o=i.enter),{exit:s,enter:o}},n.updateStatus=function(i,o){i===void 0&&(i=!1),o!==null?(this.cancelNextCallback(),o===W?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===L&&this.setState({status:q})},n.performEnter=function(i){var o=this,s=this.props.enter,a=i,c=this.getTimeouts();if(!i&&!s){this.safeSetState({status:X},function(){o.props.onEntered&&o.props.onEntered(o.node,a)});return}this.props.onEnter&&this.props.onEnter(this.node,a),this.safeSetState({status:W},function(){o.props.onEntering&&o.props.onEntering(o.node,a),o.onTransitionEnd(c.enter,function(){o.safeSetState({status:X},function(){o.props.onEntered&&o.props.onEntered(o.node,a)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts();if(!o){this.safeSetState({status:L},function(){i.props.onExited&&i.props.onExited(i.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:Ge},function(){i.props.onExiting&&i.props.onExiting(i.node),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:L},function(){i.props.onExited&&i.props.onExited(i.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(){s&&(s=!1,o.nextCallback=null,i())},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=i==null&&!this.props.addEndListener;if(!this.node||s){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===q)return null;var o=this.props,s=o.children,a=$e(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return s(i,a)},Nn(e,[{key:"node",get:function(){var i,o=(i=this.props.nodeRef)===null||i===void 0?void 0:i.current;if(!o)throw new Error("notistack - Custom snackbar is not refForwarding");return o}}]),e}(G.Component);function B(){}_e.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:B,onEntering:B,onEntered:B,onExit:B,onExiting:B,onExited:B};function ze(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function we(t,e){return l.useMemo(function(){return t==null&&e==null?null:function(n){ze(t,n),ze(e,n)}},[t,e])}function se(t){var e=t.timeout,n=t.style,r=n===void 0?{}:n,i=t.mode;return{duration:typeof e=="object"?e[i]||0:e,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var Se={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},ht=function(e){e.scrollTop=e.scrollTop},Ue=function(e){return Math.round(e)+"ms"};function H(t,e){t===void 0&&(t=["all"]);var n=e||{},r=n.duration,i=r===void 0?300:r,o=n.easing,s=o===void 0?Se.easeInOut:o,a=n.delay,c=a===void 0?0:a,u=Array.isArray(t)?t:[t];return u.map(function(f){var m=typeof i=="string"?i:Ue(i),h=typeof c=="string"?c:Ue(c);return f+" "+m+" "+s+" "+h}).join(",")}function $n(t){return t&&t.ownerDocument||document}function mt(t){var e=$n(t);return e.defaultView||window}function _n(t,e){e===void 0&&(e=166);var n;function r(){for(var i=this,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var c=function(){t.apply(i,s)};clearTimeout(n),n=setTimeout(c,e)}return r.clear=function(){clearTimeout(n)},r}function On(t,e){var n=e.getBoundingClientRect(),r=mt(e),i;if(e.fakeTransform)i=e.fakeTransform;else{var o=r.getComputedStyle(e);i=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var s=0,a=0;if(i&&i!=="none"&&typeof i=="string"){var c=i.split("(")[1].split(")")[0].split(",");s=parseInt(c[4],10),a=parseInt(c[5],10)}switch(t){case"left":return"translateX("+(r.innerWidth+s-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-s)+"px)";case"up":return"translateY("+(r.innerHeight+a-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-a)+"px)"}}function ee(t,e){if(e){var n=On(t,e);n&&(e.style.webkitTransform=n,e.style.transform=n)}}var An=l.forwardRef(function(t,e){var n=t.children,r=t.direction,i=r===void 0?"down":r,o=t.in,s=t.style,a=t.timeout,c=a===void 0?0:a,u=t.onEnter,f=t.onEntered,m=t.onExit,h=t.onExited,C=$e(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),p=l.useRef(null),g=we(n.ref,p),v=we(g,e),y=function(b,_){ee(i,b),ht(b),u&&u(b,_)},S=function(b){var _=s?.transitionTimingFunction||Se.easeOut,O=se({timeout:c,mode:"enter",style:A({},s,{transitionTimingFunction:_})});b.style.webkitTransition=H("-webkit-transform",O),b.style.transition=H("transform",O),b.style.webkitTransform="none",b.style.transform="none"},w=function(b){var _=s?.transitionTimingFunction||Se.sharp,O=se({timeout:c,mode:"exit",style:A({},s,{transitionTimingFunction:_})});b.style.webkitTransition=H("-webkit-transform",O),b.style.transition=H("transform",O),ee(i,b),m&&m(b)},j=function(b){b.style.webkitTransition="",b.style.transition="",h&&h(b)},F=l.useCallback(function(){p.current&&ee(i,p.current)},[i]);return l.useEffect(function(){if(!(o||i==="down"||i==="right")){var T=_n(function(){p.current&&ee(i,p.current)}),b=mt(p.current);return b.addEventListener("resize",T),function(){T.clear(),b.removeEventListener("resize",T)}}},[i,o]),l.useEffect(function(){o||F()},[o,F]),l.createElement(_e,Object.assign({appear:!0,nodeRef:p,onEnter:y,onEntered:f,onEntering:S,onExit:w,onExited:j,in:o,timeout:c},C),function(T,b){return l.cloneElement(n,A({ref:v,style:A({visibility:T==="exited"&&!o?"hidden":void 0},s,{},n.props.style)},b))})});An.displayName="Slide";function le(t){return Object.entries(t).reduce(function(e,n){var r,i=n[0],o=n[1];return A({},e,(r={},r[i]=Me(o),r))},{})}var Y={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},Xe=le({root:{height:0},entered:{height:"auto"}}),pe="0px",he=175,Fn=l.forwardRef(function(t,e){var n=t.children,r=t.in,i=t.onExited,o=l.useRef(null),s=l.useRef(null),a=we(e,s),c=function(){return o.current?o.current.clientHeight:0},u=function(g){g.style.height=pe},f=function(g){var v=c(),y=se({timeout:he,mode:"enter"}),S=y.duration,w=y.easing;g.style.transitionDuration=typeof S=="string"?S:S+"ms",g.style.height=v+"px",g.style.transitionTimingFunction=w||""},m=function(g){g.style.height="auto"},h=function(g){g.style.height=c()+"px"},C=function(g){ht(g);var v=se({timeout:he,mode:"exit"}),y=v.duration,S=v.easing;g.style.transitionDuration=typeof y=="string"?y:y+"ms",g.style.height=pe,g.style.transitionTimingFunction=S||""};return l.createElement(_e,{in:r,unmountOnExit:!0,onEnter:u,onEntered:m,onEntering:f,onExit:h,onExited:i,onExiting:C,nodeRef:s,timeout:he},function(p,g){return l.createElement("div",Object.assign({ref:a,className:ce(Xe.root,p==="entered"&&Xe.entered),style:A({pointerEvents:"all",overflow:"hidden",minHeight:pe,transition:H("height")},p==="entered"&&{overflow:"visible"},{},p==="exited"&&!r&&{visibility:"hidden"})},g),l.createElement("div",{ref:o,className:Y.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});Fn.displayName="Collapse";var Dn=typeof window<"u"?l.useLayoutEffect:l.useEffect;function Ve(t){var e=l.useRef(t);return Dn(function(){e.current=t}),l.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var In=l.forwardRef(function(t,e){var n=t.children,r=t.className,i=t.autoHideDuration,o=t.disableWindowBlurListener,s=o===void 0?!1:o,a=t.onClose,c=t.id,u=t.open,f=t.SnackbarProps,m=f===void 0?{}:f,h=l.useRef(),C=Ve(function(){a&&a.apply(void 0,arguments)}),p=Ve(function(w){!a||w==null||(h.current&&clearTimeout(h.current),h.current=setTimeout(function(){C(null,"timeout",c)},w))});l.useEffect(function(){return u&&p(i),function(){h.current&&clearTimeout(h.current)}},[u,i,p]);var g=function(){h.current&&clearTimeout(h.current)},v=l.useCallback(function(){i!=null&&p(i*.5)},[i,p]),y=function(j){m.onMouseEnter&&m.onMouseEnter(j),g()},S=function(j){m.onMouseLeave&&m.onMouseLeave(j),v()};return l.useEffect(function(){if(!s&&u)return window.addEventListener("focus",v),window.addEventListener("blur",g),function(){window.removeEventListener("focus",v),window.removeEventListener("blur",g)}},[s,v,u]),l.createElement("div",Object.assign({ref:e},m,{className:ce(Y.Snackbar,r),onMouseEnter:y,onMouseLeave:S}),n)});In.displayName="Snackbar";var me,Ln=le({root:(me={display:"flex",flexWrap:"wrap",flexGrow:1},me[D.upSm]={flexGrow:"initial",minWidth:"288px"},me)}),gt=l.forwardRef(function(t,e){var n=t.className,r=$e(t,["className"]);return G.createElement("div",Object.assign({ref:e,className:ce(Ln.root,n)},r))});gt.displayName="SnackbarContent";var V=le({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),Pe="notistack-snackbar",Wn=l.forwardRef(function(t,e){var n=t.id,r=t.message,i=t.action,o=t.iconVariant,s=t.variant,a=t.hideIconVariant,c=t.style,u=t.className,f=o[s],m=i;return typeof m=="function"&&(m=m(n)),G.createElement(gt,{ref:e,role:"alert","aria-describedby":Pe,style:c,className:ce(Y.MuiContent,Y.MuiContentVariant(s),V.root,V[s],u,!a&&f&&V.lessPadding)},G.createElement("div",{id:Pe,className:V.message},a?null:f,r),m&&G.createElement("div",{className:V.action},m))});Wn.displayName="MaterialDesignContent";var P,ge,te,ne,ve,M={view:{default:20},snackbar:{default:6,dense:2}},Je="."+Y.CollapseWrapper,be=16;P={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:H(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},P[Je]={padding:M.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},P.maxWidth="calc(100% - "+M.view.default*2+"px)",P[D.downXs]={width:"100%",maxWidth:"calc(100% - "+be*2+"px)"},ge={},ge[Je]={padding:M.snackbar.dense+"px 0px"},M.view.default-M.snackbar.default+"",M.view.default-M.snackbar.default+"",te={left:M.view.default+"px"},te[D.upSm]={alignItems:"flex-start"},te[D.downXs]={left:be+"px"},ne={right:M.view.default+"px"},ne[D.upSm]={alignItems:"flex-end"},ne[D.downXs]={right:be+"px"},ve={left:"50%",transform:"translateX(-50%)"},ve[D.upSm]={alignItems:"center"};var Bn=function(){return l.useContext(Mn)};const Hn="/cable",Gn=yn(Hn);function zn(t,e){const{enqueueSnackbar:n}=Bn(),{t:r}=ke(),[i,o]=l.useState([]),[s,a]=l.useState(""),[c,u]=l.useState("awaiting_message"),f=l.useRef({}),m=l.useRef(Lt(p=>{const v=f.current[p].join("");o(y=>y.find(w=>w.id===p)?y.map(w=>w.id===p?{...w,body:v}:w):[...y,{id:p,role:"assistant",body:v}])},50)).current;return l.useEffect(()=>{const p=Gn.subscriptions.create({channel:"AssistantChannel",id:t},{connected(){},disconnected(){u("awaiting_message")},rejected(){},received(g){const{message_id:v,delta:y,index:S}=g;f.current[v]||(f.current[v]=[]),y[0]==="DONE"?u("awaiting_message"):f.current[v][S]=y,m(v)}});return()=>{p.unsubscribe(),m.cancel()}},[t]),{messages:i,input:s,handleInputChange:p=>{a(p.target.value)},submitMessage:async p=>{if(p.preventDefault(),!s.trim())return;u("in_progress");const g={id:crypto.randomUUID(),role:"user",body:s};o(v=>[...v,g]),a("");try{await De.post(It(t),{message:s,output:e})}catch(v){if(u("awaiting_message"),De.isAxiosError(v)){if(v.response?.status===429){const y=r("assistant.disabled_html");o(S=>[...S,{id:crypto.randomUUID(),role:"assistant",body:y}])}n(v.message),console.error(v)}else throw v}},status:c}}function Un(){const t=ye.assistant_thread,[e,n]=l.useState(!1),[r,i]=l.useState(0),o=()=>n(!1);l.useEffect(()=>{const u=document.querySelectorAll(".root-assistant-btn");for(const f of u)f.addEventListener("click",()=>{n(!0),i(m=>m+1)})},[]);const{t:s}=ke(),a=s("assistant.disabled");let c=null;return t&&(c=zn(t.id,"")),d.jsxs(K,{placement:"end",className:"bg-body-light border-0",show:e,onHide:o,children:[d.jsx(K.Header,{closeButton:!0,children:d.jsx(K.Title,{as:"div",className:"h4",children:s("assistant.name")})}),d.jsx(K.Body,{className:"my-3",children:d.jsxs(Ft,{fallback:d.jsx(Dt,{}),children:[!t&&d.jsx("div",{className:"mb-4",children:a}),t&&c&&d.jsx(dn,{focusesCount:r,previousMessages:ye.assistant_thread_messages,assistantThread:t,streamData:c})]})})]})}function Xn(t={}){const e=document.getElementById("root-assistant-offcanvas");if(!e)throw new Error("root element is not found");Nt.createRoot(e).render(d.jsx(Ot,{theme:At,children:d.jsx(Un,{...t})}))}jt(ye.locale);Xn();
