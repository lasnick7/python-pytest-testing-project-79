import{a as y}from"./js.cookie-CIHGNHeG.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"v9904"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9e8f4bb9-c660-4f98-a921-6eea856bcbfb",e._sentryDebugIdIdentifier="sentry-dbid-9e8f4bb9-c660-4f98-a921-6eea856bcbfb")})()}catch{}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o!=null)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t}({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:hexlet.io":!0})}catch{}})();window.addEventListener("load",()=>{const{carrotquest:e,gon:t}=window,{current_user:n,carrotquest:{user_hash:o},fired_events:a={}}=t;if(!e){Sentry.captureMessage("Failed to load Carrotquest");return}const u={signed_in:"$authorized",signed_out:"$logout"},s=d=>{Object.keys(u).filter(r=>Object.keys(d).includes(r)).forEach(r=>{e.track(u[r])})},p=d=>{const{can_use_paid_features:r,email:i,current_company:l,current_program:g}=d,c=y.get("_ym_uid"),f=y.get("_rid_anm_id");return[{op:"update_or_create",key:"Платный доступ",value:r},i?{op:"update_or_create",key:"$email",value:i}:null,l?{op:"update_or_create",key:"Компания",value:l}:{op:"delete",key:"Компания",value:null},g?{op:"update_or_create",key:"Текущая программа",value:d.current_program}:{op:"delete",key:"Текущая программа",value:null},c?{op:"update_or_create",key:"_ym_uid",value:c}:null,f?{op:"update_or_create",key:"_rid_anm_id",value:f}:null].filter(h=>h)},_=d=>{const r=window.location.search.includes("chat=1");d.current_company&&!r&&typeof e.removeChat=="function"&&e.removeChat()},b=p(n);n.is_guest?s(a):(e.auth(n.id.toString(),o),s(a),_(n)),e.identify(b)});
